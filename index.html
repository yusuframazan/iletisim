// Gerekli Firebase SDK'larını içe aktarın
import { initializeApp } from "firebase/app";
import { getDatabase } from "firebase/database";

// Firebase yapılandırma
const firebaseConfig = {
  apiKey: "AIzaSyAmNW_Tcu9tp00QVbh6ZQX1v0bPUQExw6s",
  authDomain: "iletisim-902bb.firebaseapp.com",
  databaseURL: "https://iletisim-902bb-default-rtdb.europe-west1.firebaseatabase.app",
  projectId: "iletisim-902bb",
  storageBucket: "iletisim-902bb.appspot.com",
  messagingSenderId: "1088047995375",
  appId: "1:1088047995375:web:eb6fdac69c506f1c7b3e1a",
  measurementId: "G-3FKYYMHDJX"
};

// Firebase'i başlat
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);

// İletişim formu verilerini gösterme işlevi
function renderContactData(data) {
    const contactDataDiv = document.getElementById('contact-data');
    contactDataDiv.innerHTML = ''; // Önceki verileri temizle
    // Veri var mı kontrol et
    if (data) {
        // Her iletişim girişi için döngü oluştur
        Object.keys(data).forEach((key) => {
            const contact = data[key];
            // İletişim bilgilerini göstermek için HTML elementleri oluştur
            const contactDiv = document.createElement('div');
            contactDiv.innerHTML = `
                <p><strong>İsim:</strong> ${contact.name}</p>
                <p><strong>E-posta:</strong> ${contact.email}</p>
                <p><strong>Konu:</strong> ${contact.subject}</p>
                <p><strong>Mesaj:</strong> ${contact.message}</p>
                <hr>
            `;
            // İletişim bilgilerini contactDataDiv'e ekle
            contactDataDiv.appendChild(contactDiv);
        });
    } else {
        // Veri yoksa bir mesaj göster
        contactDataDiv.innerHTML = '<p>İletişim verisi mevcut değil.</p>';
    }
}

// "contact" düğümündeki verileri dinle
database.ref('contact').on('value', (snapshot) => {
    const data = snapshot.val();
    // Verileri sayfada göster
    renderContactData(data);
});
